import streamlit as st
import random

# рдкреЗрдЬ рдХреА рд╕реЗрдЯрд┐рдВрдЧ
st.set_page_config(page_title="рдорд╣реЗрд╢ рд╕рдЯреНрдЯрд╛ рдХрд┐рдВрдЧ", page_icon="ЁЯО░")

# рдбреЗрдЯрд╛рдмреЗрд╕ (рдмреИрд▓реЗрдВрд╕ рд╕реЗрд╡ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП)
if 'balance' not in st.session_state:
    st.session_state.balance = 0

# --- рдореБрдЦреНрдп рд╡реЗрдмрд╕рд╛рдЗрдЯ ---
st.markdown("<h1 style='text-align: center; color: gold;'>ЁЯО░ рдорд╣реЗрд╢ рд╕рдЯреНрдЯрд╛ рдХрд┐рдВрдЧ ЁЯО░</h1>", unsafe_allow_html=True)
st.write("---")

# --- рдкреИрд╕реЗ рдЬрдорд╛ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ ---
with st.expander("ЁЯТ░ рдкреИрд╕реЗ рдЬрдорд╛ рдХрд░реЗрдВ (рдпрд╣рд╛рдБ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ)"):
    st.write("1. рдиреАрдЪреЗ рджрд┐рдП рдЧрдП QR рдХреЛрдб рдХреЛ рд╕реНрдХреИрди рдХрд░рдХреЗ рдкреЗрдореЗрдВрдЯ рдХрд░реЗрдВред")
    
    # рдЕрдкрдиреА UPI ID рдпрд╣рд╛рдБ рдмрджрд▓реЗрдВ
    my_upi = "8824558142-2@ibl" 
    qr_url = f"https://upiqr.in/api/qr?name=MAHESH&vpa={my_upi}"
    st.image(qr_url, width=200)
    
    st.write("2. рдкреЗрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж рдиреАрдЪреЗ рдмрдЯрди рджрдмрд╛рдХрд░ рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдкрд░ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рднреЗрдЬреЗрдВред")
    
    # рдЕрдкрдирд╛ рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдирдВрдмрд░ рдпрд╣рд╛рдБ рдмрджрд▓реЗрдВ (91 рдХреЗ рд╕рд╛рде)
    my_phone = "918824558142" 
    wa_link = f"https://wa.me/{my_phone}?text=рднрд╛рдИ_рдореИрдВрдиреЗ_рдкреИрд╕реЗ_рднреЗрдЬ_рджрд┐рдП_рд╣реИрдВ_рдмреИрд▓реЗрдВрд╕_рдРрдб_рдХрд░реЛ"
    st.markdown(f'<a href="{wa_link}"><button style="background:green;color:white;padding:10px;border-radius:5px;">тЬЕ рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдкрд░ рдлреЛрдЯреЛ рднреЗрдЬреЗрдВ</button></a>', unsafe_allow_html=True)

# --- рдПрдбрдорд┐рди рдкреИрдирд▓ (рд╕рд┐рд░реНрдл рдЖрдкрдХреЗ рд▓рд┐рдП) ---
with st.sidebar:
    st.header("ЁЯСС рдорд╣реЗрд╢ рднрд╛рдИ (Admin)")
    pincode = st.text_input("рдкрд┐рди рдбрд╛рд▓реЗрдВ", type="password")
    if pincode == "7860": # рдЖрдкрдХрд╛ рд╕реАрдХреНрд░реЗрдЯ рдкрд┐рди
        amount = st.number_input("рдХрд┐рддрдирд╛ рдкреИрд╕рд╛ рдЬреЛреЬрдирд╛ рд╣реИ?", step=10)
        if st.button("рдмреИрд▓реЗрдВрд╕ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ"):
            st.session_state.balance += amount
            st.success("рдмреИрд▓реЗрдВрд╕ рдЬреБреЬ рдЧрдпрд╛!")
            st.rerun()

# --- рдЧреЗрдо рдЦреЗрд▓рдиреЗ рдХреА рдЬрдЧрд╣ ---
st.subheader(f"ЁЯТ╡ рдЖрдкрдХрд╛ рдмреИрд▓реЗрдВрд╕: тВ╣{st.session_state.balance}")

bet = st.number_input("рдХрд┐рддрдиреЗ рдХреА рдмрд╛рдЬреА?", min_value=10, step=10)
guess = st.number_input("рдирдВрдмрд░ рдЪреБрдиреЗрдВ (1-10)", min_value=1, max_value=10)

if st.button("ЁЯО░ рдЧреЗрдо рд╢реБрд░реВ рдХрд░реЗрдВ", use_container_width=True):
    if st.session_state.balance < bet:
        st.error("рднрд╛рдИ рдкрд╣рд▓реЗ рдкреИрд╕реЗ рдЬрдорд╛ рдХрд░реЛ, рдмреИрд▓реЗрдВрд╕ рдХрдо рд╣реИ!")
    else:
        win_num = random.randint(1, 10)
        st.write(f"ЁЯО▓ рдирдВрдмрд░ рдирд┐рдХрд▓рд╛: **{win_num}**")
        
        if guess == win_num:
            prize = bet * 9
            st.session_state.balance += (prize - bet)
            st.balloons()
            st.success(f"рдореМрдЬ рд╣реЛ рдЧрдИ! рдЖрдк тВ╣{prize} рдЬреАрдд рдЧрдП!")
        else:
            st.session_state.balance -= bet
            st.error(f"рдЕреЮрд╕реЛрд╕! рдЖрдк тВ╣{bet} рд╣рд╛рд░ рдЧрдПред")

# --- рд╡рд┐рдбреНрд░реЙ рдмрдЯрди ---
st.write("---")
if st.button("ЁЯТ╕ рдкреИрд╕реЗ рдирд┐рдХрд╛рд▓реЗрдВ (Withdraw)"):
    st.info("рд╡рд┐рдбреНрд░реЙ рдХреА рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬ рджреА рдЧрдИ рд╣реИред рдорд╣реЗрд╢ рднрд╛рдИ рдЖрдкрдХреЛ рдкреЗрдореЗрдВрдЯ рдХрд░ рджреЗрдВрдЧреЗред")
